extensions:  ["semantiva-imaging"]

pipeline:
  nodes:
    - processor: "sweep:TwoDGaussianSingleChannelImageGenerator:SingleChannelImageStack"
      parameters:
        vars:
          t: {lo: -1, hi: 2, steps: 3}
        parametric_expressions:
          x_0: "50 + 5 * t"
          y_0: "50 + 5 * t + 5 * t ** 2"
          "std_dev": "(50 + 20 * t, 20)"
          amplitude: "100"
          angle: "60 + 5 * t"
        static_params:
          image_size: [128, 128]

    - processor: "slice:TwoDTiltedGaussianFitterProbe:SingleChannelImageStack"
      context_key: "gaussian_fit_parameters"

    - processor: ModelFittingContextProcessor
      parameters:
        fitting_model: "model:PolynomialFittingModel:degree=1"
        independent_var_key: "t_values"
        dependent_var_key: "gaussian_fit_parameters.std_dev_x"
        context_key: "std_dev_coefficients"

    - processor: ModelFittingContextProcessor
      parameters:
        fitting_model: "model:PolynomialFittingModel:degree=1"
        independent_var_key: "t_values"
        dependent_var_key: "gaussian_fit_parameters.angle"
        context_key: "orientation_coefficients"
